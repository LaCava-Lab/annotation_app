<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Annotation App API Documentation</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 2em;
      background-color: #fafafa;
    }

    h1,
    h2,
    h3 {
      color: #333;
    }

    code,
    pre {
      background: #f2f2f2;
      padding: 0.2em 0.4em;
      display: inline-block;
    }

    section {
      margin-bottom: 2em;
    }

    .auth-note {
      color: #d9534f;
    }

    ul {
      margin-top: 0.2em;
    }
  </style>
</head>

<body>
  <h1>üìö Annotation App API Documentation</h1>
  <p>This documentation lists all available API routes for the annotation platform.</p>

  <section>
    <h2>üîê Authentication</h2>
    <p>Most routes require Authentication, you can acquire a token by logging in. This will set a HTTP-only cookie with
      your token </p>
  </section>

  <section>
    <h2>üë§ Auth Routes</h2>
    <ul>
      <li><code>POST /auth/signup</code> - Register a new user</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /auth/signup
Content-Type: application/json

{
  "UserEmail": "john@example.com",
  "UserPIN": 1234
}
</code></pre>
      </details>
      <li><code>POST /auth/login</code> - Log in and receive a token</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /auth/login
Content-Type: application/json

{
  "UserEmail": "john@example.com",
  "UserPIN": 1234
}
</code></pre>
      </details>
      <li><code>POST /auth/logout</code> - Log out</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /auth/logout
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üë• User Routes</h2>
    <ul>
      <li><code>GET /users/me?userKey=...</code> - Get user by userKey</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /users/me?userKey=U0000
</code></pre>
      </details>
      <li><code>POST /users/set_current_pmid</code> - Set current paper in progress</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /users/set_current_pmid
Content-Type: application/json

{
  "userKey": "U0000",
  "pmid": "123456"
}
</code></pre>
      </details>
      <li><code>POST /users/add_completed</code> - Add completed paper for user</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /users/add_completed
Content-Type: application/json

{
  "userKey": "U0000",
  "pmid": "123456"
}
</code></pre>
      </details>
      <li><code>POST /users/add_abandoned</code> - Add abandoned paper for user</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /users/add_abandoned
Content-Type: application/json

{
  "userKey": "U0000",
  "pmid": "123456"
}
</code></pre>
      </details>
      <li><code>POST /users/set_abandon_limit</code> - Set abandon limit for user</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /users/set_abandon_limit
Content-Type: application/json

{
  "userKey": "U0000"
}
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üìÑ Paper Routes</h2>
    <ul>
      <li><code>GET /papers</code> - All papers (requires auth)</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /papers
</code></pre>
      </details>
      <li><code>GET /papers/:pmid</code> - Get paper by PMID</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /papers/38096902
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üì∞ FullText Routes</h2>
    <ul>
      <li><code>GET /fulltext?filename=...</code> - Get fulltext by filename (PMID)</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /fulltext?filename=38096902
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üß† Session State Routes</h2>
    <ul>
      <li><code>GET /sessions/by_user_pmid?userKey=...&pmid=...</code> - Get session state by userKey and pmid</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /sessions/by_user_pmid?userKey=U0000&pmid=123456
</code></pre>
      </details>
      <li><code>GET /sessions/:id</code> - Get session state by SessionID</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /sessions/session123
</code></pre>
      </details>
      <li><code>POST /sessions</code> - Create a session state</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /sessions
Content-Type: application/json

{
  "SessionID": "session123",
  "userID": "U0000",
  "PMID": "PMID12345",
  "SessionStatus": "open",
  "json_state": "{}"
}
</code></pre>
      </details>
      <li><code>POST /sessions/save</code> - Save or update session state for a user and pmid</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /sessions/save
Content-Type: application/json

{
  "userKey": "U0000",
  "pmid": "123456",
  "json_state": "{\"progress\":50}"
}
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üß™ Experiment Routes</h2>
    <ul>
      <li><code>GET /experiments</code> - Get all experiments</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /experiments
</code></pre>
      </details>
      <li><code>POST /experiments</code> - Add experiments in bulk</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /experiments
Content-Type: application/json

[
  {
    "ExperimentID": "exp001",
    "SessionID": "session123",
    "name": "Experiment A",
    "name_section": "Methods",
    "name_start": 10,
    "name_end": 50,
    "name_alt": "Alt Experiment A",
    "type": "PI"
  }
]
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üß¥ Solution Routes</h2>
    <ul>
      <li><code>GET /solutions</code> - Get all solutions</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /solutions
</code></pre>
      </details>
      <li><code>POST /solutions</code> - Add solutions in bulk</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /solutions
Content-Type: application/json

[
  {
    "SolutionID": "sol001",
    "ExperimentID": "exp001",
    "name": "Solution X",
    "name_section": "Methods",
    "name_start": 5,
    "name_end": 30,
    "name_alt": "Alt Solution X",
    "type": "PI",
    "temp": "37C",
    "time": "2h",
    "ph": 7
  }
]
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üß≤ Bait Routes</h2>
    <ul>
      <li><code>GET /baits</code> - Get all baits</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /baits
</code></pre>
      </details>
      <li><code>POST /baits</code> - Add baits in bulk</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /baits
Content-Type: application/json

[
  {
    "BaitID": "bait001",
    "ExperimentID": "exp001",
    "name": "Bait X",
    "name_section": "Intro",
    "name_start": 3,
    "name_end": 20,
    "name_alt": "Alt Bait",
    "species_name": "Homo sapiens",
    "species_name_section": "Intro",
    "species_name_start": 21,
    "species_name_end": 35,
    "species_name_alt": "Alt Species",
    "isControl": "No",
    "bait_type": "protein"
  }
]
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üß¨ Interactor Routes</h2>
    <ul>
      <li><code>GET /interactors</code> - Get all interactors</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /interactors
</code></pre>
      </details>
      <li><code>POST /interactors</code> - Add interactors in bulk</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /interactors
Content-Type: application/json

[
  {
    "InteractorID": "inter001",
    "BaitID": "bait001",
    "ExperimentID": "exp001",
    "name": "Interactor X",
    "name_section": "Results",
    "name_start": 11,
    "name_end": 40,
    "name_alt": "Alt Interactor",
    "species_name": "Mus musculus",
    "species_name_section": "Results",
    "species_name_start": 41,
    "species_name_end": 60,
    "species_name_alt": "Alt Species",
    "type": "RNA"
  }
]
</code></pre>
      </details>
    </ul>
  </section>

  <section>
    <h2>üß™ Chemistry Routes</h2>
    <ul>
      <li><code>GET /chemistrys</code> - Get all chemistry records</li>
      <details>
        <summary>Example</summary>
        <pre><code>GET /chemistrys
</code></pre>
      </details>
      <li><code>POST /chemistrys</code> - Add chemistry records in bulk</li>
      <details>
        <summary>Example</summary>
        <pre><code>POST /chemistrys
Content-Type: application/json

[
  {
    "ChemistryID": "chem001",
    "SolutionID": "sol001",
    "name": "Chem A",
    "name_section": "Methods",
    "name_start": 1,
    "name_end": 15,
    "name_alt": "Alt Chem",
    "concentration_name": "10mM",
    "concentration_name_section": "Methods",
    "concentration_name_start": 16,
    "concentration_name_end": 20,
    "concentration_name_alt": "Alt Conc",
    "unit_name": "mM",
    "unit_name_section": "Methods",
    "unit_name_start": 21,
    "unit_name_end": 23,
    "unit_name_alt": "Alt Unit",
    "type": "DNA"
  }
]
</code></pre>
      </details>
    </ul>
  </section>

  <footer>
    <hr />
    <p>üß† Made with Express + Sequelize + Postgres ‚Äì <em>Test with Postman or REST Client</em></p>
  </footer>
</body>

</html>